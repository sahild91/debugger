<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src vscode-resource: 'unsafe-inline'; script-src vscode-resource: 'unsafe-inline'; img-src vscode-resource: data:;">
    <title>Port11 Debugger</title>
    <link href="{{styleUri}}" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="logo-icon">
                        <path d="M12 2L2 7L12 12L22 7L12 2Z"/>
                        <path d="M2 17L12 22L22 17"/>
                        <path d="M2 12L12 17L22 12"/>
                    </svg>
                    <h1>Port11 Debugger</h1>
                </div>
                <p class="subtitle">MSPM0 Development Environment</p>
            </div>
        </header>

        <!-- Status Overview Section -->
        <section id="status-section" class="section">
            <div class="section-header">
                <h2>System Status</h2>
                <button id="refresh-status-btn" class="btn btn-icon" title="Refresh Status">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M13.65 2.35A7.95 7.95 0 0 0 8 0a8 8 0 0 0-8 8h1a7 7 0 0 1 7-7 7 7 0 0 1 6.93 6H13l2 2 2-2h-2a8 8 0 0 0-1.35-5.65z"/>
                    </svg>
                </button>
            </div>
            
            <div id="status-grid" class="status-grid">
                <div class="status-item" id="status-sdk">
                    <div class="status-icon">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M3 3h14v2H3V3zm0 4h14v2H3V7zm0 4h14v2H3v-2zm0 4h14v2H3v-2z"/>
                        </svg>
                    </div>
                    <div class="status-details">
                        <h3>MSPM0 SDK</h3>
                        <p id="sdk-status-text">Checking...</p>
                        <small id="sdk-version" class="status-version"></small>
                    </div>
                    <div class="status-indicator" id="sdk-indicator">
                        <div class="spinner"></div>
                    </div>
                </div>

                <div class="status-item" id="status-toolchain">
                    <div class="status-icon">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M10.5 1.5L8.5 3.5L12 7L16 3L10.5 1.5ZM8 8L4 12L8 16L12 12L8 8Z"/>
                        </svg>
                    </div>
                    <div class="status-details">
                        <h3>ARM-CGT-CLANG</h3>
                        <p id="toolchain-status-text">Checking...</p>
                        <small id="toolchain-version" class="status-version"></small>
                    </div>
                    <div class="status-indicator" id="toolchain-indicator">
                        <div class="spinner"></div>
                    </div>
                </div>

                <div class="status-item" id="status-board">
                    <div class="status-icon">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M2 2h16v16H2V2zm2 2v12h12V4H4zm2 2h8v2H6V6zm0 4h8v2H6v-2zm0 4h8v2H6v-2z"/>
                        </svg>
                    </div>
                    <div class="status-details">
                        <h3>Boards</h3>
                        <p id="board-status-text">Checking...</p>
                        <small id="board-count" class="status-version"></small>
                    </div>
                    <div class="status-indicator" id="board-indicator">
                        <div class="spinner"></div>
                    </div>
                </div>
            </div>
            
            <!-- Setup Progress (Hidden by default) -->
            <div id="setup-progress" class="progress-container" style="display: none;">
                <div class="progress-header">
                    <h3 id="progress-title">Setting up toolchain...</h3>
                    <span id="progress-percentage">0%</span>
                </div>
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
                <p id="progress-text" class="progress-message">Initializing...</p>
                <div id="progress-details" class="progress-details"></div>
            </div>
        </section>

        <!-- Quick Actions Section -->
        <section id="actions-section" class="section">
            <div class="section-header">
                <h2>Quick Actions</h2>
            </div>
            
            <div class="action-grid">
                <button id="setup-btn" class="action-card setup-card">
                    <div class="action-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5 3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z"/>
                        </svg>
                    </div>
                    <div class="action-content">
                        <h3>Setup Toolchain</h3>
                        <p>Install SDK and compiler</p>
                    </div>
                </button>

                <button id="build-btn" class="action-card build-card" disabled>
                    <div class="action-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12.89 3L14.85 3.4L11.11 21L9.15 20.6L12.89 3M19.59 12L16 8.41V5.58L22.42 12L16 18.41V15.58L19.59 12M1.58 12L8 5.58V8.41L4.41 12L8 15.58V18.41L1.58 12Z"/>
                        </svg>
                    </div>
                    <div class="action-content">
                        <h3>Build Project</h3>
                        <p>Compile your code</p>
                    </div>
                </button>

                <button id="flash-btn" class="action-card flash-card" disabled>
                    <div class="action-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M7 2V13H10V22L17 10H13L17 2H7Z"/>
                        </svg>
                    </div>
                    <div class="action-content">
                        <h3>Flash Firmware</h3>
                        <p>Program your board</p>
                    </div>
                </button>

                <button id="debug-btn" class="action-card debug-card" disabled>
                    <div class="action-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 8H17.19C16.74 7.22 16.12 6.55 15.37 6.04L17 4.41L15.59 3L13.42 5.17C12.96 5.06 12.49 5 12 5S11.04 5.06 10.59 5.17L8.41 3L7 4.41L8.62 6.04C7.88 6.55 7.26 7.22 6.81 8H4V10H6.09C6.04 10.33 6 10.66 6 11V12H4V14H6V15C6 15.34 6.04 15.67 6.09 16H4V18H6.81C7.85 19.79 9.78 21 12 21S16.15 19.79 17.19 18H20V16H17.91C17.96 15.67 18 15.34 18 15V14H20V12H18V11C18 10.66 17.96 10.33 17.91 10H20V8ZM16 15C16 16.66 14.66 18 13 18H11C9.34 18 8 16.66 8 15V11C8 9.34 9.34 8 11 8H13C14.66 8 16 9.34 16 11V15Z"/>
                        </svg>
                    </div>
                    <div class="action-content">
                        <h3>Start Debug</h3>
                        <p>Debug your firmware</p>
                    </div>
                </button>
            </div>
        </section>

        <!-- Board Management Section -->
        <section id="boards-section" class="section">
            <div class="section-header">
                <h2>Connected Boards</h2>
                <button id="detect-boards-btn" class="btn btn-secondary">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M11.5 1a.5.5 0 0 1 .5.5v1h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1h-1a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h1v-1a.5.5 0 0 1 .5-.5h1z"/>
                        <path d="M10.121 12.596c.53-.146.949-.55 1.212-1.096a2.5 2.5 0 1 0-4.666 0c.263.546.682.95 1.212 1.096a8.01 8.01 0 0 0-2.018 1.904H3.5a.5.5 0 0 0-.5.5v.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-.5a.5.5 0 0 0-.5-.5h-2.361a8.01 8.01 0 0 0-2.018-1.904z"/>
                    </svg>
                    Detect Boards
                </button>
            </div>
            
            <div id="boards-list" class="boards-list">
                <div class="empty-state">
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="currentColor" class="empty-icon">
                        <path d="M6 6h36v36H6V6zm6 6v24h24V12H12zm6 6h12v3H18v-3zm0 6h12v3H18v-3z"/>
                    </svg>
                    <p>No boards detected</p>
                    <small>Click "Detect Boards" to scan for connected devices</small>
                </div>
            </div>
        </section>

        <!-- Debug Controls (Hidden by default) -->
        <section id="debug-section" class="section" style="display: none;">
            <div class="section-header">
                <h2>Debug Controls</h2>
                <div class="debug-status">
                    <span id="debug-status" class="status-badge">Stopped</span>
                </div>
            </div>
            
            <div class="debug-controls">
                <button id="debug-halt-btn" class="btn btn-secondary" disabled>
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M6 4h4v8H6z"/>
                    </svg>
                    Halt
                </button>
                <button id="debug-resume-btn" class="btn btn-secondary" disabled>
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M5 3l6 5-6 5V3z"/>
                    </svg>
                    Resume
                </button>
                <button id="debug-stop-btn" class="btn btn-danger" disabled>
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M4 4h8v8H4z"/>
                    </svg>
                    Stop
                </button>
            </div>

            <div class="debug-info" id="debug-info">
                <div class="debug-registers">
                    <h4>Registers</h4>
                    <div id="registers-list" class="registers-list">
                        <div class="empty-state">
                            <p>No debug session active</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-status">
                    <span id="footer-status">Ready</span>
                </div>
                <div class="footer-actions">
                    <button id="settings-btn" class="btn btn-text" title="Open Settings">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>
                            <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.292-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.292c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"/>
                        </svg>
                        Settings
                    </button>
                    <button id="logs-btn" class="btn btn-text" title="Show Logs">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M3 2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v13h-2.5a.5.5 0 0 1 0-1h1.5V2H4v12h1.5a.5.5 0 0 1 0 1H3V2zm8.5 8.5a.5.5 0 0 1 0 1H5a.5.5 0 0 1 0-1h6.5zM5 5a.5.5 0 0 0 0 1h6.5a.5.5 0 0 0 0-1H5zm0 3a.5.5 0 0 0 0 1h6.5a.5.5 0 0 0 0-1H5z"/>
                        </svg>
                        Logs
                    </button>
                </div>
            </div>
        </footer>
    </div>

    <script src="{{scriptUri}}"></script>
</body>
</html>